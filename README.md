# ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏î‡πâ‡∏ß‡∏¢ PID Controller + State Machine

## üìã ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢ ESP32 ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£ **PID Control** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ï‡∏±‡∏ß‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô (Heater) ‡πÉ‡∏´‡πâ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö State Machine ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ

---

## üéØ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
- **‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥**: ‡πÉ‡∏ä‡πâ PID Algorithm ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
- **‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô**: ‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö PWM ‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î-‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ö‡∏ö On/Off ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤
- **‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢**: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ PID Parameters (Kp, Ki, Kd) ‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
- **‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢**: ‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡∏î‡πÑ‡∏ü‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î (Safety Cutoff)

### ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- üå°Ô∏è **‡∏ï‡∏π‡πâ‡∏≠‡∏ö (Oven)**: ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô
- üç∫ **‡∏ñ‡∏±‡∏á‡∏´‡∏°‡∏±‡∏Å‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå**: ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏±‡∏Å (Fermentation)
- üî¨ **‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏ö‡πÅ‡∏´‡πâ‡∏á**: ‡∏≠‡∏ö‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°
- ‚ô®Ô∏è **‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏≥‡∏ô‡πâ‡∏≥‡∏£‡πâ‡∏≠‡∏ô**: ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ô‡πâ‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
- üß™ **Lab Incubator**: ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏≤‡∏∞‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏ä‡∏∑‡πâ‡∏≠

---

## üìê ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```
Project_PID_Fuzzy StateMachine_PID_SWConfig/
‚îÇ
‚îú‚îÄ‚îÄ platformio.ini          # ‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PlatformIO + Library ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ
‚îÇ
‚îú‚îÄ‚îÄ include/                # ‡πÑ‡∏ü‡∏•‡πå Header ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Class ‡∏ï‡πà‡∏≤‡∏á‡πÜ
‚îÇ   ‚îú‚îÄ‚îÄ DevRelay.h         # Class ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Relay (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Active HIGH/LOW)
‚îÇ   ‚îú‚îÄ‚îÄ DevSW.h            # Class ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡∏û‡∏£‡πâ‡∏≠‡∏° Debouncing
‚îÇ   ‚îî‚îÄ‚îÄ README
‚îÇ
‚îú‚îÄ‚îÄ src/                    # ‡πÇ‡∏Ñ‡πâ‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
‚îÇ   ‚îî‚îÄ‚îÄ main.cpp           # ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏´‡∏•‡∏±‡∏Å (PID Control + State Machine)
‚îÇ
‚îú‚îÄ‚îÄ lib/                    # ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Library ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
‚îÇ   ‚îî‚îÄ‚îÄ README
‚îÇ
‚îî‚îÄ‚îÄ test/                   # ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Unit Test (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
    ‚îî‚îÄ‚îÄ README
```

---

## üß† ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£ PID Control

### PID ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

**PID** ‡∏¢‡πà‡∏≠‡∏°‡∏≤‡∏à‡∏≤‡∏Å **Proportional-Integral-Derivative** ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ô‡∏¥‡∏¢‡∏°‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ (‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥, ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô) ‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

### ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á PID

1. **P (Proportional)** - ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô
   - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å**‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô** (Error)
   - ‡∏¢‡∏¥‡πà‡∏á‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏°‡∏≤‡∏Å ‡∏Å‡πá‡∏≠‡∏≠‡∏Å‡πÅ‡∏£‡∏á‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
   - ‡∏™‡∏π‡∏ï‡∏£: `P_out = Kp √ó Error`

2. **I (Integral)** - ‡∏ú‡∏•‡∏£‡∏ß‡∏°
   - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å**‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏™‡∏°‡∏°‡∏≤**
   - ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Steady-State Error (‡πÄ‡∏ö‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ö‡∏ô‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ)
   - ‡∏™‡∏π‡∏ï‡∏£: `I_out = Ki √ó ‚à´Error dt`

3. **D (Derivative)** - ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
   - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å**‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á Error**
   - ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡∏ß‡πà‡∏á (Overshoot) ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
   - ‡∏™‡∏π‡∏ï‡∏£: `D_out = Kd √ó (dError/dt)`

### ‡∏™‡∏°‡∏Å‡∏≤‡∏£ PID Algorithm

```
Output = Kp√óError + Ki√ó‚à´Error dt + Kd√ó(dError/dt)

‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà:
  Error = Setpoint - Input (‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ - ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏à‡∏£‡∏¥‡∏á)
  Kp, Ki, Kd = ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á (Tuning)
  Output = ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏Ç‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (PWM Duty Cycle)
```

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ

1. **‡∏≠‡πà‡∏≤‡∏ô‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥** ‡∏à‡∏≤‡∏Å DS18B20 ‚Üí ‡∏ô‡∏≥‡∏°‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ `Input`
2. **‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì PID** ‚Üí ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö `Setpoint` ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏´‡∏≤‡∏Ñ‡πà‡∏≤ `Output`
3. **‡∏™‡πà‡∏á PWM** ‚Üí ‡∏Ñ‡πà‡∏≤ Output (0-255) ‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô
4. **‡∏ß‡∏ô‡∏•‡∏π‡∏õ** ‚Üí ‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏á‡∏ó‡∏µ‡πà

---

## ‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö State Machine

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ **State Machine** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 5 ‡πÇ‡∏´‡∏°‡∏î:

| ‡πÇ‡∏´‡∏°‡∏î | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|------|---------|
| **Processing** | ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏î‡πâ‡∏ß‡∏¢ PID ‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏Å‡∏ï‡∏¥) |
| **Setpoint Config** | ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (Target Temperature) |
| **PID Config** | ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ Kp, Ki, Kd |
| **Manual PWM** | ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô PWM ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á (‡πÑ‡∏°‡πà‡∏°‡∏µ PID) |
| **Manual Relay** | ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î Relay ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á |
### State Machine Diagram

<div align="center">
  <img width="800" alt="State Machine Diagram" src="https://github.com/user-attachments/assets/3921726a-f1f0-49cd-9ff6-e139625d8b9e" />
</div>
---

## üîå ‡∏ß‡∏á‡∏à‡∏£‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ESP32

### ‡∏ö‡∏≠‡∏£‡πå‡∏î ESP32 DevKit V2 (THAITECHZONE)

<div align="center">
  <img width="600" alt="ESP32 DevKit V2 Board" src="https://github.com/user-attachments/assets/745a318d-05c9-4f29-b999-897efe7b5a24" />
</div>

### Pin Configuration

| ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå | ‡∏ä‡∏ô‡∏¥‡∏î | GPIO Pin | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ |
|---------|------|----------|----------|
| **DS18B20** | Sensor ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ | GPIO 14 | ‡∏ï‡πà‡∏≠ R Pull-up 4.7kŒ© ‡πÑ‡∏õ‡∏¢‡∏±‡∏á 3.3V |
| **Heater** | PWM Output | GPIO 13 | ‡∏ï‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô MOSFET/SSR |
| **OLED Display** | ‡∏à‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• I2C | SDA=21, SCL=22 | ‡πÉ‡∏ä‡πâ 0.96" SSD1306 |
| **Switch 1** | Mode/Enter | GPIO 34 | Input Only (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡πà‡∏≠ R Pull-up 10kŒ©) |
| **Switch 2** | Down | GPIO 35 | Input Only (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡πà‡∏≠ R Pull-up 10kŒ©) |
| **Switch 3** | Up | GPIO 32 | (‡∏°‡∏µ Internal Pull-up ‡πÑ‡∏î‡πâ) |
| **Relay 1** | Output | GPIO 17 | Optional (Active LOW) |
| **Relay 2** | Output | GPIO 16 | Optional (Active LOW) |
| **Relay 3** | Output | GPIO 4 | Optional (Active LOW) |

### Wiring Diagram - DS18B20

```
DS18B20                     ESP32
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ VCC ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ(3.3V)‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 3.3V ‚îÇ
‚îÇ     ‚îÇ                    ‚îÇ      ‚îÇ
‚îÇ DQ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ G14  ‚îÇ
‚îÇ     ‚îÇ      ‚îÇ             ‚îÇ      ‚îÇ
‚îÇ GND ‚îú‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ             ‚îÇ      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îî‚îÄ‚îÄ[4.7kŒ©]‚îÄ 3.3V    ‚îÇ
          ‚îÇ                ‚îÇ      ‚îÇ
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ GND  ‚îÇ
                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Wiring Diagram - Heater Control (MOSFET)

```
       PWM Signal                MOSFET                Heater
        (GPIO 13)              (IRF520N)             12V DC / AC
ESP32                                                 
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  G13 ‚îú‚îÄ‚îÄ[220Œ©]‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ Gate    (D) ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  Heater  ‚îÇ
‚îÇ      ‚îÇ              ‚îÇ             ‚îÇ            ‚îÇ   (+)    ‚îÇ
‚îÇ  GND ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ Source  (S) ‚îú‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î§  Heater  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ    ‚îÇ    ‚îÇ   (-)    ‚îÇ
                                       GND   ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                             ‚îÇ
                                          Power+
                                        (12V DC)
```

### Wiring Diagram - OLED Display

```
OLED SSD1306            ESP32
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   VCC    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 3.3V ‚îÇ
‚îÇ   GND    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ GND  ‚îÇ
‚îÇ   SCL    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ G22  ‚îÇ
‚îÇ   SDA    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ G21  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Wiring Diagram - Switches (‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡∏Å‡∏î)

```
SW1 (Mode/Enter)         SW2 (Down)           SW3 (Up)
                         
    ‚îå‚îÄ[10kŒ©]‚îÄ 3.3V       ‚îå‚îÄ[10kŒ©]‚îÄ 3.3V      ‚îå‚îÄ[10kŒ©]‚îÄ 3.3V
    ‚îÇ                    ‚îÇ                    ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> G34      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> G35      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> G32
    ‚îÇ                    ‚îÇ                    ‚îÇ
   [SW1]                [SW2]                [SW3]
    ‚îÇ                    ‚îÇ                    ‚îÇ
   GND                  GND                  GND

‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: GPIO 34, 35 ‡πÄ‡∏õ‡πá‡∏ô Input-Only ‡πÑ‡∏°‡πà‡∏°‡∏µ Internal Pull-up
          ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡πà‡∏≠ R 10kŒ© ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡πÄ‡∏≠‡∏á!
```

### ‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á

<div align="center">
  <img src="https://github.com/user-attachments/assets/44e3113a-d55c-4d64-a4a6-4315f8676953" alt="‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏ß‡∏á‡∏à‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á ESP32 PID Controller" width="800">
  
  *‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏ß‡∏á‡∏à‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏î‡πâ‡∏ß‡∏¢ ESP32 ‡∏û‡∏£‡πâ‡∏≠‡∏° Sensor DS18B20, ‡∏à‡∏≠ OLED ‡πÅ‡∏•‡∏∞‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°*
</div>

---

## üì¶ Library ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

| Library | ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô | ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà |
|---------|----------|---------|
| OneWire | ^2.3.8 | ‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏Å‡∏±‡∏ö DS18B20 |
| DallasTemperature | ^4.0.6 | ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏à‡∏≤‡∏Å DS18B20 |
| Adafruit SSD1306 | ^2.5.9 | ‡∏Ç‡∏±‡∏ö‡∏à‡∏≠ OLED |
| Adafruit GFX Library | ^1.11.9 | ‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü‡∏¥‡∏Å‡∏ö‡∏ô‡∏à‡∏≠ |
| PID | ^1.2.1 | ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì PID Algorithm |

---

## üöÄ ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞ Upload ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°

```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á PlatformIO Core (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
pip install platformio

# ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
cd Project_PID_Fuzzy\ StateMachine_PID_SWConfig

# Build ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
pio run

# Upload ‡∏•‡∏á ESP32
pio run --target upload

# ‡πÄ‡∏õ‡∏¥‡∏î Serial Monitor ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
pio device monitor
```

### 2. ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô VSCode + PlatformIO

1. ‡πÄ‡∏õ‡∏¥‡∏î VSCode
2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Extension "PlatformIO IDE"
3. ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
4. ‡∏Ñ‡∏•‡∏¥‡∏Å **Build** (‚úì)
5. ‡πÄ‡∏™‡∏µ‡∏¢‡∏ö ESP32 ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå
6. ‡∏Ñ‡∏•‡∏¥‡∏Å **Upload** (‚Üí)
7. ‡∏Ñ‡∏•‡∏¥‡∏Å **Serial Monitor** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

---

## üéÆ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå (Control)

| ‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå | ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô | ‡πÇ‡∏´‡∏°‡∏î Processing | ‡πÇ‡∏´‡∏°‡∏î Config |
|--------|----------|----------------|-------------|
| **SW1** (Mode) | ‡∏Å‡∏î‡∏™‡∏±‡πâ‡∏ô: ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô<br>**‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ**: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏´‡∏°‡∏î | ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Setpoint | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡πÇ‡∏´‡∏°‡∏î‡∏ñ‡∏±‡∏î‡πÑ‡∏õ |
| **SW2** (Down) | ‡∏Å‡∏î‡∏™‡∏±‡πâ‡∏ô: ‡∏•‡∏î‡∏Ñ‡πà‡∏≤ | - | ‡∏•‡∏î Setpoint / ‡∏•‡∏î Kp, Ki, Kd / ‡∏•‡∏î PWM |
| **SW3** (Up) | ‡∏Å‡∏î‡∏™‡∏±‡πâ‡∏ô: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤ | - | ‡πÄ‡∏û‡∏¥‡πà‡∏° Setpoint / ‡πÄ‡∏û‡∏¥‡πà‡∏° Kp, Ki, Kd / ‡πÄ‡∏û‡∏¥‡πà‡∏° PWM |

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Setpoint

1. **‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á SW1** (Mode) 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î **Setpoint Config**
2. ‡∏Å‡∏î **SW3** (Up) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
3. ‡∏Å‡∏î **SW2** (Down) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
4. **‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á SW1** ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏Å‡∏ï‡∏¥

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ PID (Tuning)

1. **‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á SW1** 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏à‡∏≤‡∏Å‡πÇ‡∏´‡∏°‡∏î Setpoint Config
2. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î **PID Config** ‚Üí ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ **Kp** ‡∏Å‡πà‡∏≠‡∏ô
3. ‡∏Å‡∏î SW2/SW3 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ Kp
4. **‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á SW1** 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡∏õ‡∏£‡∏±‡∏ö **Ki**
5. **‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á SW1** 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡∏õ‡∏£‡∏±‡∏ö **Kd**
6. **‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á SW1** 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏Å‡∏ï‡∏¥

---

## üìä ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£ Tuning PID

### ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Default Values)

```cpp
Kp = 5.0   // Proportional Gain
Ki = 0.5   // Integral Gain
Kd = 1.0   // Derivative Gain

Setpoint = 25.0¬∞C  // ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö PID ‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà (Ziegler-Nichols Method)

1. **‡∏ï‡∏±‡πâ‡∏á Ki=0, Kd=0** ‚Üí ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà P
2. **‡πÄ‡∏û‡∏¥‡πà‡∏° Kp ‡∏ó‡∏µ‡∏•‡∏∞‡∏ô‡πâ‡∏≠‡∏¢** ‡∏à‡∏ô‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏Å‡∏ß‡πà‡∏á ‚Üí ‡∏à‡∏î Kp ‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô **Ku**
3. **‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡∏ß‡πà‡∏á** (Oscillation Period) ‚Üí ‡∏à‡∏î **Tu**
4. **‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤ PID** ‡∏ï‡∏≤‡∏°‡∏™‡∏π‡∏ï‡∏£:
   - `Kp = 0.6 √ó Ku`
   - `Ki = 1.2 √ó Ku / Tu`
   - `Kd = 0.075 √ó Ku √ó Tu`

### ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£ Tuning

| ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ | ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ |
|-------|---------|
| ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ä‡πâ‡∏≤, ‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤ | ‡πÄ‡∏û‡∏¥‡πà‡∏° **Kp** ‡∏´‡∏£‡∏∑‡∏≠ **Ki** |
| ‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏Å‡∏ß‡πà‡∏á (Overshoot) | ‡∏•‡∏î **Kp** ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏° **Kd** |
| ‡∏Ñ‡πà‡∏≤‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ | ‡πÄ‡∏û‡∏¥‡πà‡∏° **Ki** |
| ‡πÅ‡∏Å‡∏ß‡πà‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ | ‡∏•‡∏î **Kp** ‡πÅ‡∏•‡∏∞ **Ki** |

---

## üõ°Ô∏è ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

- ‚úÖ **Safety Cutoff**: ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏Å‡∏¥‡∏ô **100¬∞C** ‚Üí ‡∏õ‡∏¥‡∏î Heater ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ **Output Limit**: PWM ‡∏ñ‡∏π‡∏Å‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà 0-255 (0-100%)
- ‚úÖ **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡∏•‡∏á Memory**: Setpoint ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤ PID ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Flash Memory (‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏î‡∏±‡∏ö‡πÑ‡∏ü)
- ‚úÖ **Error Detection**: ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏≠‡∏á Sensor ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏à‡∏≠

---

## üì° Serial Monitor Output

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î Serial Monitor ‡∏ó‡∏µ‡πà **115200 baud** ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

```
--- ESP32 PID Ready ---
Settings loaded from memory
Setpoint: 50.00
Kp: 5.00, Ki: 0.50, Kd: 1.00

[Processing Mode]
Temp: 49.25¬∞C | SP: 50.00¬∞C | Output: 128 (50%)
Temp: 49.75¬∞C | SP: 50.00¬∞C | Output: 85 (33%)
Temp: 50.00¬∞C | SP: 50.00¬∞C | Output: 64 (25%)
```

---

## üß™ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö (Testing)

### 1. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Manual PWM Mode

- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏´‡∏°‡∏î **Manual PWM** (‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á SW1 ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á)
- ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ PWM ‡∏î‡πâ‡∏ß‡∏¢ SW2/SW3 (0-255)
- ‡∏î‡∏π‡∏ß‡πà‡∏≤ Heater ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏° % Duty Cycle ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Sensor

- ‡∏î‡∏π Serial Monitor ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
- ‡∏ñ‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á "-127.00¬∞C" ‡∏´‡∏£‡∏∑‡∏≠ "Error" ‚Üí Sensor ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πà‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏µ‡∏¢

### 3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Relay (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)

- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏´‡∏°‡∏î **Manual Relay**
- ‡πÉ‡∏ä‡πâ SW2 ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Relay 1, 2, 3
- ‡πÉ‡∏ä‡πâ SW3 ‡πÄ‡∏õ‡∏¥‡∏î Relay / SW2 ‡∏õ‡∏¥‡∏î Relay

---

## üìû ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤

**‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤**: Nattapholj  
**‡∏≠‡∏µ‡πÄ‡∏°‡∏•**: Nattapholj@gmail.com  
**LINE ID**: thaitechzone  
**‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£**: 0939391546  

---

## üìÑ License

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ü‡∏£‡∏µ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£  
‡∏´‡∏≤‡∏Å‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤

---

## üîß Troubleshooting (‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤)

| ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ | ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ |
|-------|---------|
| ‡∏à‡∏≠‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠ SDA/SCL ‡πÅ‡∏•‡∏∞‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà I2C (0x3C ‡∏´‡∏£‡∏∑‡∏≠ 0x3D) |
| ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏™‡∏î‡∏á -127¬∞C | Sensor ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏µ‡∏¢ / ‡∏•‡∏∑‡∏°‡∏ï‡πà‡∏≠ R Pull-up 4.7kŒ© |
| Heater ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô | ‡∏ï‡∏£‡∏ß‡∏à MOSFET/SSR ‡πÅ‡∏•‡∏∞‡πÅ‡∏´‡∏•‡πà‡∏á‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏ü Heater |
| ‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô | GPIO 34, 35 ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡πà‡∏≠ R Pull-up ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å 10kŒ© |
| ‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡∏ß‡πà‡∏á‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î | ‡∏•‡∏î‡∏Ñ‡πà‡∏≤ Kp ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤ Kd |

---

## üíª ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Code ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### 1Ô∏è‚É£ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°

```cpp
void setup() {
  // A. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PWM ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Heater
  ledcSetup(PWM_CHANNEL, PWM_FREQ, PWM_RESOLUTION);
  ledcAttachPin(HEATER_PIN, PWM_CHANNEL);
  ledcWrite(PWM_CHANNEL, 0);  // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏õ‡∏¥‡∏î
  
  // B. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Sensor DS18B20
  sensors.begin();
  
  // C. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏≠ OLED
  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);
  
  // D. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå
  Mode.begin();
  Down.begin();
  Up.begin();
  
  // E. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Relay
  RL1.begin();
  RL2.begin();
  RL3.begin();
  
  // F. ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Memory
  loadSettings();
  
  // G. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PID
  myPID.SetOutputLimits(0, 255);  // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Output 0-255
  myPID.SetMode(AUTOMATIC);        // ‡πÄ‡∏õ‡∏¥‡∏î Auto Mode
  myPID.SetTunings(Kp, Ki, Kd);   // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PID
}

void loop() {
  // 1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå (‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î/‡∏õ‡∏•‡πà‡∏≠‡∏¢)
  Mode.update();
  Down.update();
  Up.update();
  
  // 2. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° (‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î‡∏Ñ‡πà‡∏≤)
  handleButtonPress();
  
  // 3. ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ï‡∏≤‡∏° State
  processState();
  
  // 4. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏∏‡∏Å‡πÜ 200ms
  if (millis() - lastDisplayTime > 200) {
    updateDisplay();
    debugSerial();
    lastDisplayTime = millis();
  }
}
```

**‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- `setup()` ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
- `loop()` ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ß‡∏ô‡∏ã‡πâ‡∏≥‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ ‡∏≠‡πà‡∏≤‡∏ô‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå ‚Üí ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•

---

### 2Ô∏è‚É£ ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PWM ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ESP32

```cpp
// ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤ PWM
const int PWM_FREQ = 1000;      // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà 1kHz
const int PWM_CHANNEL = 0;      // ‡∏ä‡πà‡∏≠‡∏á PWM 0
const int PWM_RESOLUTION = 8;   // 8-bit (0-255)

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PWM
ledcSetup(PWM_CHANNEL, PWM_FREQ, PWM_RESOLUTION);
ledcAttachPin(HEATER_PIN, PWM_CHANNEL);
ledcWrite(PWM_CHANNEL, 128);  // ‡∏™‡πà‡∏á PWM 50% (128/255)
```

**‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- ESP32 ‡πÉ‡∏ä‡πâ `ledcXXX` ‡πÅ‡∏ó‡∏ô `analogWrite()` ‡∏Ç‡∏≠‡∏á Arduino
- `PWM_RESOLUTION = 8` ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á ‡∏Ñ‡πà‡∏≤ 0-255 (2^8)
- ‡∏Ñ‡πà‡∏≤ PWM = 255 ‚Üí ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏ü 100%
- ‡∏Ñ‡πà‡∏≤ PWM = 128 ‚Üí ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏ü 50%
- ‡∏Ñ‡πà‡∏≤ PWM = 0 ‚Üí ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô

---

### 3Ô∏è‚É£ ‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏à‡∏≤‡∏Å DS18B20

```cpp
// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Sensor
OneWire oneWire(ONE_WIRE_BUS);
DallasTemperature sensors(&oneWire);

// ‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô setup()
sensors.begin();

// ‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô stateProcessing()
sensors.requestTemperatures();           // ‡∏™‡∏±‡πà‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤
double currentTemp = sensors.getTempCByIndex(0);  // ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ Sensor ‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
if (currentTemp == -127.00 || currentTemp == 85.00) {
  // Sensor ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤!
  ledcWrite(PWM_CHANNEL, 0);  // ‡∏õ‡∏¥‡∏î Heater ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
  displayError("SENSOR", "ERROR");
  return;
}

Input = currentTemp;  // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Input ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PID
```

**‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- `requestTemperatures()` ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ ~750ms (‡∏ä‡πâ‡∏≤) ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ö‡πà‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
- ‡∏Ñ‡πà‡∏≤ `-127¬∞C` ‡∏´‡∏£‡∏∑‡∏≠ `85¬∞C` = Sensor ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏µ‡∏¢)
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Error ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏™‡∏°‡∏≠

---

### 4Ô∏è‚É£ ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì PID ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°

```cpp
// ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ PID
double Setpoint = 50.0;  // ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
double Input = 0;        // ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏à‡∏£‡∏¥‡∏á (‡∏à‡∏≤‡∏Å Sensor)
double Output = 0;       // ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ (0-255)
double Kp = 5.0, Ki = 0.5, Kd = 1.0;

// ‡∏™‡∏£‡πâ‡∏≤‡∏á PID Object
PID myPID(&Input, &Output, &Setpoint, Kp, Ki, Kd, DIRECT);

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PID
myPID.SetOutputLimits(0, 255);  // ‡∏à‡∏≥‡∏Å‡∏±‡∏î Output 0-255
myPID.SetMode(AUTOMATIC);        // ‡πÄ‡∏õ‡∏¥‡∏î PID Auto

// ‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô loop()
Input = currentTemp;             // ‡πÉ‡∏™‡πà‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏à‡∏£‡∏¥‡∏á
myPID.Compute();                 // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì PID
ledcWrite(PWM_CHANNEL, (int)Output);  // ‡∏™‡πà‡∏á PWM ‡πÑ‡∏õ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°
```

**‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- `Setpoint` = ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
- `Input` = ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å Sensor
- `Output` = PID ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ (‡∏Ñ‡πà‡∏≤ PWM)
- PID ‡∏à‡∏∞‡∏õ‡∏£‡∏±‡∏ö Output ‡πÉ‡∏´‡πâ Input ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á Setpoint ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
Setpoint = 50¬∞C
Input = 45¬∞C  ‚Üí Error = +5¬∞C ‚Üí Output = ‡∏™‡∏π‡∏á (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô)
Input = 50¬∞C  ‚Üí Error = 0¬∞C  ‚Üí Output = ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏î‡∏±‡∏ö)
Input = 55¬∞C  ‚Üí Error = -5¬∞C ‚Üí Output = ‡∏ï‡πà‡∏≥ (‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô)
```

---

### 5Ô∏è‚É£ State Machine ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô State

```cpp
// ‡∏Å‡∏≥‡∏´‡∏ô‡∏î State ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
enum SystemState {
  STATE_PROCESSING,       // ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô PID ‡∏õ‡∏Å‡∏ï‡∏¥
  STATE_SETPOINT_CONFIG,  // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
  STATE_PID_CONFIG,       // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Kp, Ki, Kd
  STATE_MANUAL_PWM,       // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö PWM ‡πÅ‡∏ö‡∏ö Manual
  STATE_MANUAL_RELAY      // ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Relay ‡πÅ‡∏ö‡∏ö Manual
};

SystemState currentState = STATE_PROCESSING;

void processState() {
  switch (currentState) {
    case STATE_PROCESSING:
      stateProcessing();  // ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô PID
      break;
    case STATE_SETPOINT_CONFIG:
      stateSetpointConfig();  // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Setpoint
      break;
    // ... state ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
  }
}
```

**‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô State:**
```cpp
void stateProcessing() {
  if (Mode.pressedFor(3000)) {  // ‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    readyToChange = true;        // ‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
  }
  
  if (Mode.wasReleased()) {      // ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏õ‡∏∏‡πà‡∏°
    if (readyToChange) {
      currentState = STATE_SETPOINT_CONFIG;  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô State
      readyToChange = false;
    }
  }
}
```

**‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- ‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡∏ï‡∏±‡πâ‡∏á‡∏ò‡∏á `readyToChange = true`
- ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏õ‡∏∏‡πà‡∏° ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ò‡∏á ‚Üí ‡∏ñ‡πâ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡πá‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô State
- ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏ß‡∏¥ ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡∏õ‡∏•‡πà‡∏≠‡∏¢

---

### 6Ô∏è‚É£ Class DevSW - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå

```cpp
// ‡πÉ‡∏ô DevSW.h
class DevSW {
  public:
    void begin();                    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
    void update();                   // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ó‡∏∏‡∏Å loop)
    bool onPressed();                // ‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏Å‡∏î‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    bool wasReleased();              // ‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    bool pressedFor(unsigned long ms);  // ‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏Ñ‡∏£‡∏ö ms ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
    unsigned long pressedDuration(); // ‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏õ‡∏ô‡∏≤‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡πÅ‡∏•‡πâ‡∏ß
};

// ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
DevSW Mode(SW1_PIN);

void setup() {
  Mode.begin();  // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
}

void loop() {
  Mode.update();  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏ó‡∏∏‡∏Å‡∏£‡∏≠‡∏ö
  
  if (Mode.onPressed()) {
    Serial.println("‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°!");
  }
  
  if (Mode.pressedFor(3000)) {
    Serial.println("‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ!");
  }
  
  if (Mode.wasReleased()) {
    Serial.println("‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏õ‡∏∏‡πà‡∏°!");
  }
}
```

**‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥:**
- ‚úÖ **Debouncing** - ‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏à‡∏≤‡∏Å‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå
- ‚úÖ **Edge Detection** - ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ç‡∏ì‡∏∞‡∏Å‡∏î‡πÅ‡∏•‡∏∞‡∏Ç‡∏ì‡∏∞‡∏õ‡∏•‡πà‡∏≠‡∏¢
- ‚úÖ **Long Press** - ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á
- ‚úÖ **Duration Tracking** - ‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡∏î

---

### 7Ô∏è‚É£ Class DevRelay - ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Relay

```cpp
// ‡πÉ‡∏ô DevRelay.h
class DevRelay {
  public:
    // isActiveHigh = false ‚Üí Relay ‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡πâ‡∏ß‡∏¢ LOW (Active LOW)
    DevRelay(uint8_t pin, bool isActiveHigh = true);
    
    void begin();       // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
    void on();          // ‡πÄ‡∏õ‡∏¥‡∏î Relay
    void off();         // ‡∏õ‡∏¥‡∏î Relay
    void toggle();      // ‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
    bool isOn();        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
};

// ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
DevRelay RL1(RL1_PIN, false);  // Active LOW

void setup() {
  RL1.begin();  // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏õ‡∏¥‡∏î Relay)
}

void loop() {
  RL1.on();   // ‡πÄ‡∏õ‡∏¥‡∏î Relay
  delay(1000);
  RL1.off();  // ‡∏õ‡∏¥‡∏î Relay
  delay(1000);
  
  if (RL1.isOn()) {
    Serial.println("Relay ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà");
  }
}
```

**‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á **Active HIGH** (HIGH=‡πÄ‡∏õ‡∏¥‡∏î) ‡πÅ‡∏•‡∏∞ **Active LOW** (LOW=‡πÄ‡∏õ‡∏¥‡∏î)
- Relay Module ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏ä‡πâ Active LOW
- ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Object ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡πá‡∏Ñ‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢ `isOn()`

---

### 8Ô∏è‚É£ ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å/‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Flash Memory

```cpp
#include <Preferences.h>
Preferences preferences;

// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤
void saveSettings() {
  preferences.begin("pid-ctrl", false);  // ‡πÄ‡∏õ‡∏¥‡∏î RW Mode
  
  preferences.putFloat("setpoint", Setpoint);
  preferences.putFloat("kp", Kp);
  preferences.putFloat("ki", Ki);
  preferences.putFloat("kd", Kd);
  preferences.putBool("rl1State", RL1.isOn());
  
  preferences.end();
  Serial.println("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤
void loadSettings() {
  preferences.begin("pid-ctrl", true);  // ‡πÄ‡∏õ‡∏¥‡∏î Read-Only Mode
  
  Setpoint = preferences.getFloat("setpoint", 40.0);  // default 40
  Kp = preferences.getFloat("kp", 5.0);               // default 5.0
  Ki = preferences.getFloat("ki", 0.5);               // default 0.5
  Kd = preferences.getFloat("kd", 1.0);               // default 1.0
  
  preferences.end();
  Serial.println("‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
}
```

**‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- ESP32 ‡∏°‡∏µ **Flash Memory** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏≤‡∏ß‡∏£ (‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏î‡∏±‡∏ö‡πÑ‡∏ü)
- ‡πÉ‡∏ä‡πâ `Preferences` Library ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Key-Value Storage
- ‡∏£‡∏∞‡∏ö‡∏∏ "namespace" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: `Float`, `Int`, `Bool`, `String`

**‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å:**
- ‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á 3 ‡∏ß‡∏¥ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ‚Üí `saveSettings()` ‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å
- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà ‚Üí `loadSettings()` ‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ô `setup()`

---

### 9Ô∏è‚É£ ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏ô‡∏à‡∏≠ OLED

```cpp
void displayStateProcessing() {
  display.clearDisplay();  // ‡∏•‡πâ‡∏≤‡∏á‡∏à‡∏≠
  
  // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
  display.setTextSize(2);      // ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
  display.setTextColor(WHITE); // ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß
  display.setCursor(0, 14);    // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (x, y)
  display.print("PV:");
  display.print(Input, 1);     // ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° 1 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
  
  // ‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á
  int barHeight = map(Output, 0, 255, 0, 64);
  display.fillRect(118, 64-barHeight, 10, barHeight, WHITE);
  
  display.display();  // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡πÅ‡∏™‡∏î‡∏á
}
```

**‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:**
- `clearDisplay()` - ‡∏•‡πâ‡∏≤‡∏á‡∏à‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- `setTextSize(n)` - ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ (1=‡πÄ‡∏•‡πá‡∏Å, 2=‡∏Å‡∏•‡∏≤‡∏á, 3=‡πÉ‡∏´‡∏ç‡πà)
- `setCursor(x, y)` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
- `print()` / `println()` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
- `drawRect()` / `fillRect()` - ‡∏ß‡∏≤‡∏î‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°
- `display()` - **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç!** ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏à‡∏≠

---

### üîü Safety Features (‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)

```cpp
void stateProcessing() {
  sensors.requestTemperatures();
  double currentTemp = sensors.getTempCByIndex(0);
  
  // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Sensor Error
  if (currentTemp == -127.00 || currentTemp == 85.00) {
    ledcWrite(PWM_CHANNEL, 0);  // ‡∏õ‡∏¥‡∏î Heater ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    displayError("SENSOR", "ERROR");
    return;  // ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠
  }
  
  Input = currentTemp;
  
  // 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏Å‡∏¥‡∏ô (Overheat Protection)
  if (Input > TEMP_MAX) {  // TEMP_MAX = 100¬∞C
    ledcWrite(PWM_CHANNEL, 0);  // ‡∏õ‡∏¥‡∏î Heater ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    Output = 0;
    displayError("OVERHEAT", "> 100C");
    Serial.println("ALARM: Overheat detected!");
    return;  // ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠
  }
  
  // 3. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì PID (‡∏ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö)
  myPID.Compute();
  ledcWrite(PWM_CHANNEL, (int)Output);
}
```

**‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:**
1. **Sensor Error Detection** - ‡∏ñ‡πâ‡∏≤ Sensor ‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠ ‚Üí ‡∏õ‡∏¥‡∏î Heater ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
2. **Overheat Protection** - ‡∏ñ‡πâ‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏Å‡∏¥‡∏ô 100¬∞C ‚Üí ‡∏õ‡∏¥‡∏î Heater ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
3. **Output Limiting** - PWM ‡∏ñ‡∏π‡∏Å‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà 0-255 ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô

---

## üéì ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á

- [PID Controller Theory](https://en.wikipedia.org/wiki/PID_controller)
- [ESP32 Pinout Reference](https://randomnerdtutorials.com/esp32-pinout-reference-gpios/)
- [DS18B20 Datasheet](https://www.analog.com/media/en/technical-documentation/data-sheets/DS18B20.pdf)
- [PlatformIO Documentation](https://docs.platformio.org/)

---

**‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢**: ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏ô‡∏∏‡∏Å‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå! üöÄüî•

---

**Project**: ESP32 PID Temperature Controller  
**Version**: 1.0  
**Last Updated**: February 2026
